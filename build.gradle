subprojects {
    apply plugin: 'java'

    test {
        // Disable the test report for the individual test task
        reports.html.enabled = false

    }

    repositories {
        mavenCentral()
    }
}

task testReport(type: TestReport) {
    // make sure this task is run after all subproject test tasks
    mustRunAfter subprojects*.test

    destinationDir = file("$buildDir/reports/allTests")
    // Include the results from the `test` task in all subprojects
    reportOn subprojects*.test
}

task test {
    dependsOn subprojects*.test
    finalizedBy 'testReport'
}
task build {
    dependsOn subprojects*.build
    dependsOn test
}

